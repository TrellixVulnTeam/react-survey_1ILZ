{"ast":null,"code":"import _regeneratorRuntime from \"/Users/vanessa/Desktop/survey/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/vanessa/Desktop/survey/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/vanessa/Desktop/survey/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/vanessa/Desktop/survey/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/vanessa/Desktop/survey/client/src/components/PostForm.jsx\";\nimport React from \"react\";\nimport { useState } from 'react';\nimport { qnBuffer, choiceBuffer } from \"./Survey\";\nimport { useNavigate } from \"react-router-dom\";\nimport { StyledButton, StyledForm, StyledFormWrapper } from \"./Style.jsx\";\n\nfunction PostForm() {\n  var _this2 = this;\n\n  var resp_url = \"/questions/responses\"; // to server \n\n  var navigate = useNavigate();\n\n  var _useState = useState({\n    name: \" \",\n    colour: {\n      Blue: false,\n      Red: false,\n      Green: false,\n      Yellow: false,\n      Purple: false,\n      Pink: false\n    },\n    prog_lang: {\n      Python: false,\n      Java: false,\n      Ruby: false,\n      JavaScript: false,\n      Golang: false\n    },\n    languages: {\n      English: false,\n      Chinese: false,\n      Malay: false,\n      Tamil: false,\n      Hindi: false\n    },\n    would_pay: {\n      Yes: false,\n      No: false\n    }\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  function handleChange(e) {\n    var newData = _objectSpread({}, data); // copy curr data\n\n\n    newData[e.target.id] = e.target.value;\n    setData(newData);\n  }\n\n  function handleCheckbox(e) {\n    var newData = _objectSpread({}, data); // copy curr data\n\n\n    var updatedField = newData[e.target.id];\n    updatedField[e.target.value] = e.target.checked;\n    newData[e.target.id] = updatedField;\n    setData(newData);\n  }\n\n  function handleSubmit(_x) {\n    return _handleSubmit.apply(this, arguments);\n  }\n  /**\n   * Generates HTML script to produce checkbox or radio inputs\n   */\n\n\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var newResponse, response, server_response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              newResponse = {\n                method: \"POST\",\n                mode: \"cors\",\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(data)\n              }; //console.log(\"client sent: \", newResponse.body)\n\n              _context.next = 4;\n              return fetch(resp_url, newResponse);\n\n            case 4:\n              response = _context.sent;\n              _context.next = 7;\n              return response.json();\n\n            case 7:\n              server_response = _context.sent;\n              console.log(\"server replied: \", server_response); //const userId = server_response.id\n\n              navigate(\"/Result\");\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function generateCheckBoxes() {\n    var _this = this;\n\n    var arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    var _id = arguments.length > 1 ? arguments[1] : undefined;\n\n    var _type = arguments.length > 2 ? arguments[2] : undefined;\n\n    var field = data[_id];\n    return arr.map(function (item) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: _type,\n        name: _id,\n        id: _id,\n        value: item,\n        onChange: handleCheckbox,\n        checked: field.item,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 12\n        }\n      }), \" \", item);\n    });\n  }\n  /**\n   * Generates HTML script to produce inputs\n   */\n\n\n  function generateInput() {\n    var choices = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    var _type = arguments.length > 1 ? arguments[1] : undefined;\n\n    var field = choices[0]; // value\n\n    switch (_type) {\n      case \"0\":\n        return /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          required: true,\n          id: field,\n          value: data.field,\n          onChange: handleChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 16\n          }\n        });\n\n      case \"1\":\n        return generateCheckBoxes(choices[1], field, \"radio\");\n\n      case \"2\":\n        return generateCheckBoxes(choices[1], field, \"checkbox\");\n\n      default:\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }\n        }, \"Loading...\");\n    }\n  }\n\n  var iterator = []; // stores form's script\n\n  qnBuffer.forEach(function (item, index) {\n    iterator.push( /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 24\n      }\n    }, item[0]))); // question\n\n    iterator.push( /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }, generateInput(choiceBuffer[index], item[1]))); // choices\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(StyledButton, {\n    onClick: function onClick() {\n      return navigate(-1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(StyledFormWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(StyledForm, {\n    onSubmit: function onSubmit(e) {\n      return handleSubmit(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, iterator)), /*#__PURE__*/React.createElement(StyledButton, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, \"submit\"))));\n}\n\nexport default PostForm;","map":{"version":3,"names":["React","useState","qnBuffer","choiceBuffer","useNavigate","StyledButton","StyledForm","StyledFormWrapper","PostForm","resp_url","navigate","name","colour","Blue","Red","Green","Yellow","Purple","Pink","prog_lang","Python","Java","Ruby","JavaScript","Golang","languages","English","Chinese","Malay","Tamil","Hindi","would_pay","Yes","No","data","setData","handleChange","e","newData","target","id","value","handleCheckbox","updatedField","checked","handleSubmit","preventDefault","newResponse","method","mode","headers","body","JSON","stringify","fetch","response","json","server_response","console","log","generateCheckBoxes","arr","_id","_type","field","map","item","generateInput","choices","iterator","forEach","index","push"],"sources":["/Users/vanessa/Desktop/survey/client/src/components/PostForm.jsx"],"sourcesContent":["import React from \"react\";\nimport { useState } from 'react';\nimport { qnBuffer, choiceBuffer } from \"./Survey\";\nimport { useNavigate } from \"react-router-dom\";\nimport { StyledButton, StyledForm, StyledFormWrapper } from \"./Style.jsx\"\n\nfunction PostForm() {\n  const resp_url = \"/questions/responses\" // to server \n  const navigate = useNavigate()\n  const [data, setData] = useState({\n    name: \" \",\n    colour: {\n      Blue: false,\n      Red: false,\n      Green: false,\n      Yellow: false,\n      Purple: false,\n      Pink: false\n    },\n    prog_lang: {\n      Python: false,\n      Java: false,\n      Ruby: false,\n      JavaScript: false,\n      Golang: false\n    },\n    languages: {\n      English: false,\n      Chinese: false,\n      Malay: false,\n      Tamil: false,\n      Hindi: false\n    },\n    would_pay: {\n      Yes: false,\n      No: false\n    }\n  })\n\n  function handleChange(e) {\n    const newData = { ...data } // copy curr data\n    newData[e.target.id] = e.target.value\n    setData(newData)\n  }\n\n  function handleCheckbox(e) {\n    const newData = { ...data } // copy curr data\n    const updatedField = newData[e.target.id]\n    updatedField[e.target.value] = e.target.checked\n    newData[e.target.id] = updatedField\n    setData(newData)\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const newResponse = {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data)\n    }\n    //console.log(\"client sent: \", newResponse.body)\n    const response = await fetch(resp_url, newResponse) // post request to server \n    const server_response = await response.json()\n    console.log(\"server replied: \", server_response)\n    //const userId = server_response.id\n    navigate(\"/Result\")\n  }\n\n  /**\n   * Generates HTML script to produce checkbox or radio inputs\n   */\n  function generateCheckBoxes(arr = [], _id, _type) {\n    let field = data[_id]\n    return (\n      arr.map(item =>\n        <p><input type={_type} name={_id} id={_id} value={item} onChange={handleCheckbox} checked={field.item} /> {item}</p>\n      )\n    )\n  }\n\n  /**\n   * Generates HTML script to produce inputs\n   */\n  function generateInput(choices =[], _type) {\n    let field = choices[0] // value\n    switch(_type) {\n      case \"0\":\n        return(<input type=\"text\" required id={field} value={data.field} onChange={handleChange} />)\n      case \"1\":\n        return generateCheckBoxes(choices[1], field, \"radio\")\n      case \"2\":\n        return generateCheckBoxes(choices[1], field, \"checkbox\")\n      default:\n        return (<div>Loading...</div>)\n    }\n  }\n\n  let iterator = []; // stores form's script\n  qnBuffer.forEach((item, index) => {\n    iterator.push(<div><label>{item[0]}</label></div>) // question\n    iterator.push(<div>{generateInput(choiceBuffer[index], item[1])}</div>) // choices\n  })\n\n  return (\n    <div>\n      <StyledButton onClick={() => navigate(-1)}>Back</StyledButton>\n      <StyledFormWrapper>\n        <StyledForm onSubmit={e => handleSubmit(e)}>\n          <div>\n            <label>{iterator}</label>\n          </div>\n          <StyledButton type=\"submit\">submit</StyledButton>\n        </StyledForm>\n      </StyledFormWrapper>\n    </div>\n  )\n}\n\nexport default PostForm\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}